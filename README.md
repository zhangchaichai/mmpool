# nginx内存池的实现

### 内存池的概念
(Memory Pool)是一种内存分配方式，又被称为固定大小区块规划（fixed-size-blocks allocation）。通常我们习惯直接使用new、malloc等API申请分配内存，这样做的缺点在于：由于所申请内存块的大小不定，当频繁使用时会造成大量的内存碎片并进而降低性能。
内存池则是在真正使用内存之前，先申请分配一定数量的、大小相等(一般情况下)的内存块留作备用。当有新的内存需求时，就从内存池中分出一部分内存块，若内存块不够再继续申请新的内存。这样做的一个显著优点是，使得内存分配效率得到提升。

### nginx内存池的优点以及适用的场景
优点：

1. 减少内存碎片
2. 提升内存分配的效率

适用的场景：短链接处理。
nginx本质是http服务器，通常处理的是短链接，间接性提供服务，需要的内存不大，所以不回收内存，重置即可。客户端发起一个requests请求后，nginx服务器收到请求会返回response响应，若在keep-alive时间内没有收到客户的再次请求，

nginx服务器会主动断开连接，此时会reset内存池。下一次客户端请求再到来时，可以复用内存池。
